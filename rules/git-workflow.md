# Git 工作流

## 提交信息规范

由 `.git/hooks/commit-msg` hook 自动检查，无需手动记忆格式。

### 类型
- `feat` - 新功能
- `fix` - Bug 修复
- `docs` - 文档更新
- `style` - 代码格式（不影响逻辑）
- `refactor` - 重构（不是新功能也不是修复）
- `test` - 添加或修改测试
- `chore` - 构建过程或辅助工具变更
- `perf` - 性能优化

## 分支策略

### 分支命名
- `feature/xxx` - 新功能
- `fix/xxx` - Bug 修复
- `refactor/xxx` - 重构
- `docs/xxx` - 文档更新

### 工作流
1. 从 main 创建功能分支
2. 开发并提交（小而频繁的提交）
3. 推送并创建 PR
4. 通过代码审查和测试后合并
5. 删除功能分支

## 提交原则

### 原子性
- 每个提交应该是独立的、可编译的
- 一个提交只做一件事
- 避免巨型提交（>500行变更考虑拆分）

### 频率
- 功能开发中：频繁小提交
- 完成后：交互式 rebase 整理历史

## PR 规范

### 标题格式
```
[<类型>] <简短描述>
```

示例：
- `[feat] 添加用户认证`
- `[fix] 修复登录超时问题`

### 描述模板
```markdown
## 变更说明
简要描述这个 PR 做了什么

## 变更类型
- [ ] 新功能
- [ ] Bug 修复
- [ ] 重构
- [ ] 文档更新

## 测试
- [ ] 单元测试已添加/更新
- [ ] 所有测试通过

## 检查清单
- [ ] 代码风格检查通过
- [ ] 无安全漏洞
- [ ] 文档已更新
```

## 禁止操作

- ❌ 不要直接提交到 main 分支
- ❌ 不要强制推送到共享分支
- ❌ 不要提交敏感信息
- ❌ 不要提交大型二进制文件
- ❌ 不要在 CI 失败时合并 PR
