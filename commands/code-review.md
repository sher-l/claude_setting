---
description: 对未提交变更进行全面的安全和质量审查。
---

# /code-review 命令

对未提交变更进行全面的安全和质量审查。

## 执行步骤

1. 获取变更文件：`git diff --name-only HEAD`

2. 对每个变更文件，检查：

**安全问题（关键）：**
- 硬编码凭证、API密钥、令牌
- SQL注入漏洞
- XSS漏洞
- 缺少输入验证
- 不安全的依赖
- 路径遍历风险

**代码质量（高）：**
- 函数 > 50行
- 文件 > 800行
- 嵌套深度 > 4层
- 缺少错误处理
- console.log语句
- TODO/FIXME注释
- 公共API缺少文档

**最佳实践（中）：**
- 可变模式（使用不可变）
- 代码/注释中使用emoji
- 新代码缺少测试
- 可访问性问题

3. 生成报告，包含：
   - 严重性：关键、高、中、低
   - 文件位置和行号
   - 问题描述
   - 建议修复

4. 如果发现关键或高优先级问题则阻止提交

**永不批准有安全漏洞的代码！**
